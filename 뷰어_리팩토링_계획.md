# 뷰어 시스템 리팩토링 계획

## 현재 문제점
```cpp
// USlateManager.h - 개판난 상태
SSkeletalMeshViewerWindow* SkeletalViewerWindow = nullptr;
void OpenSkeletalMeshViewer();
void CloseSkeletalMeshViewer();
bool IsSkeletalMeshViewerOpen() const;

// 앞으로 추가될 뷰어들...
// STextureViewerWindow* TextureViewer;
// SMaterialEditorWindow* MaterialEditor;
// ... 무한 반복
```

## 해결 방안

### 1. 베이스 뷰어 클래스 설계
```cpp
// SViewerWindowBase.h
class SViewerWindowBase : public SWindow
{
public:
    virtual ~SViewerWindowBase() = default;

    // 공통 인터페이스
    virtual bool Initialize(ID3D11Device* Device, UWorld* World) = 0;
    virtual void LoadAsset(const FString& Path) = 0;
    virtual EViewerType GetViewerType() const = 0;

    // SWindow overrides (공통)
    virtual void OnRender() override;
    virtual void OnUpdate(float DeltaSeconds) override;

    bool IsOpen() const { return bIsOpen; }
    void Close() { bIsOpen = false; }

protected:
    bool bIsOpen = true;
    UWorld* World = nullptr;
    ID3D11Device* Device = nullptr;
};
```

### 2. 구체 뷰어 클래스들
```cpp
// SSkeletalMeshViewerWindow : public SViewerWindowBase
// STextureViewerWindow : public SViewerWindowBase
// SMaterialEditorWindow : public SViewerWindowBase
// SStaticMeshViewerWindow : public SViewerWindowBase
```

### 3. USlateManager 개선
```cpp
class USlateManager
{
private:
    // 개별 포인터 삭제 ❌
    // SSkeletalMeshViewerWindow* SkeletalViewerWindow;

    // 배열로 통합 관리 ✅
    TArray<SViewerWindowBase*> Viewers;

public:
    // 통합 API
    template<typename T>
    T* OpenViewer(const FString& AssetPath = "");

    void CloseViewer(SViewerWindowBase* Viewer);
    void CloseAllViewers();

    template<typename T>
    T* FindViewer() const;

    // 기존 API 호환 (내부에서 템플릿 사용)
    void OpenSkeletalMeshViewer(const char* Path)
    {
        OpenViewer<SSkeletalMeshViewerWindow>(Path);
    }
};
```

### 4. 사용 예시
```cpp
// 새로운 방식
auto* skelViewer = SlateManager.OpenViewer<SSkeletalMeshViewerWindow>();
skelViewer->LoadAsset("model.fbx");

auto* texViewer = SlateManager.OpenViewer<STextureViewerWindow>();
texViewer->LoadAsset("texture.png");

// 모든 뷰어 닫기
SlateManager.CloseAllViewers();

// 특정 타입 뷰어 찾기
auto* viewer = SlateManager.FindViewer<SSkeletalMeshViewerWindow>();
```

## 구현 단계

1. **Phase 1: 베이스 클래스**
   - `SViewerWindowBase` 생성
   - 공통 기능 추출 (Open/Close/Render)

2. **Phase 2: 기존 뷰어 마이그레이션**
   - `SSkeletalMeshViewerWindow` → 베이스 상속
   - 기존 코드 최소 수정

3. **Phase 3: 매니저 개선**
   - `TArray<SViewerWindowBase*>` 추가
   - 템플릿 API 구현
   - 기존 함수는 호환성 유지

4. **Phase 4: 새 뷰어 추가**
   - Texture/Material/StaticMesh 뷰어
   - 통일된 인터페이스로 빠른 개발

## 장점
- ✅ 확장 용이 (새 뷰어 추가 시 코드 중복 ↓)
- ✅ 일괄 관리 (전체 닫기, 메모리 관리)
- ✅ 타입 안전성 (템플릿)
- ✅ 기존 코드 호환 유지
